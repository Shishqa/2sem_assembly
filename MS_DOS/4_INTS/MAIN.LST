Turbo Assembler	 Version 4.1	    02/23/20 19:25:28	    Page 1
main.asm



      1
      2	0000			     .model tiny
      3	0000			     .code
      4
      5				     org 100h
      6	0100  33 C0		     Start:	     xor ax, ax
      7	0102  8E C0				     mov es, ax		     ; es = 0
      8
      9	0104  FA				     cli
     10	0105  BB 0024				     mov bx, 9 * 4	     ; es:bx ->	int 09h	in ISR table
     11				     ;		     mov bx, 8 * 4
     12
     13	0108  26: 8B 07				     mov ax, word ptr es:[bx]
     14	010B  A3 0156r				     mov Old09,	ax
     15	010E  26: 8B 47	02			     mov ax, word ptr es:[bx+2]
     16	0112  A3 0158r				     mov Old09+2, ax
     17
     18	0115  26: C7 07	0132r			     mov word ptr es:[bx],   offset New09
     19	011A  8C C8				     mov ax, cs
     20	011C  26: 8C 4F	02			     mov word ptr es:[bx+2], cs
     21	0120  FB				     sti
     22
     23	0121  B8 3100				     mov ax, 3100h
     24	0124  BA 015Br				     mov dx, offset EndLabel
     25	0127  D1 EA D1 EA D1 EA	D1+		     shr dx, 4
     26	      EA
     27	012F  42				     inc dx
     28	0130  CD 21				     int 21h
     29
     30				     ;==========================================================================
     31	0132			     New09	     proc
     32
     33	0132  50 57 06				     push ax di	es
     34
     35	0135  B8 B800				     mov ax, 0b800h
     36	0138  8E C0				     mov es, ax
     37	013A  E4 60				     in	al, 60h
     38						     ;mov al, dl		     ;;;
     39	013C  BF 0690				     mov di, (10 * 80 +	40) * 2
     40	013F  B4 4E				     mov ah, 4eh
     41	0141  AB				     stosw
     42
     43	0142  E4 61				     in	al, 61h		     ; контроллер клавиатуры
     44	0144  8A E0				     mov ah, al
     45	0146  0C 80				     or	al, 80h		     ; моргаем старшим битом
     46	0148  E6 61				     out 61h, al
     47	014A  8A C4				     mov al, ah
     48	014C  E6 61				     out 61h, al
     49
     50	014E  B0 20				     mov al, 20h	     ; контроллер прерываний
     51	0150  E6 20				     out 20h, al
     52
     53	0152  07 5F 58				     pop es di ax
     54
     55	0155  EA				     db	0eah
     56	0156  0000		     Old09	     dw	0
     57	0158  0000				     dw	0
Turbo Assembler	 Version 4.1	    02/23/20 19:25:28	    Page 2
main.asm



     58
     59	015A  CF				     iret		     ; interrupt return
     60	015B					     endp
     61				     ;==========================================================================
     62
     63	015B			     EndLabel:
     64				     end	     Start
Turbo Assembler	 Version 4.1	    02/23/20 19:25:28	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/23/20"
??FILENAME			  Text	 "main	  "
??TIME				  Text	 "19:25:28"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 MAIN
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ENDLABEL			  Near	 DGROUP:015B
NEW09				  Near	 DGROUP:0132
OLD09				  Word	 DGROUP:0156
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  015B Word	  Public  CODE
