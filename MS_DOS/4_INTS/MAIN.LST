Turbo Assembler	 Version 4.1	    02/18/20 18:23:43	    Page 1
main.asm



      1
      2	0000			     .model tiny
      3	0000			     .code
      4
      5				     org 100h
      6	0100  33 C0		     Start:	     xor ax, ax
      7	0102  8E C0				     mov es, ax		     ; es = 0
      8
      9	0104  FA				     cli
     10				     ;		     mov bx, 9 * 4	     ; es:bx ->	int 09h	in ISR table
     11	0105  BB 0020				     mov bx, 8 * 4
     12
     13	0108  26: 8B 07				     mov ax, word ptr es:[bx]
     14	010B  A3 0146r				     mov Old09,	ax
     15	010E  26: 8B 47	02			     mov ax, word ptr es:[bx+2]
     16	0112  A3 0148r				     mov Old09+2, ax
     17
     18	0115  26: C7 07	0132r			     mov word ptr es:[bx],   offset New09
     19	011A  8C C8				     mov ax, cs
     20	011C  26: 8C 4F	02			     mov word ptr es:[bx+2], cs
     21	0120  FB				     sti
     22
     23	0121  B8 3100				     mov ax, 3100h
     24	0124  BA 014Br				     mov dx, offset EndLabel
     25	0127  D1 EA D1 EA D1 EA	D1+		     shr dx, 4
     26	      EA
     27	012F  42				     inc dx
     28	0130  CD 21				     int 21h
     29
     30				     ;==========================================================================
     31	0132			     New09	     proc
     32
     33	0132  50 57 06				     push ax di	es
     34
     35	0135  B8 B800				     mov ax, 0b800h
     36	0138  8E C0				     mov es, ax
     37						     ;in al, 60h
     38	013A  8A C2				     mov al, dl			     ;;;
     39	013C  BF 0690				     mov di, (10 * 80 +	40) * 2
     40	013F  B4 4E				     mov ah, 4eh
     41	0141  AB				     stosw
     42
     43					     ;	     in	al, 61h		     ; контроллер клавиатуры
     44					     ;	     mov ah, al
     45					     ;	     or	al, 80h		     ; моргаем старшим битом
     46					     ;	     out 61h, al
     47					     ;	     mov al, ah
     48					     ;	     out 61h, al
     49
     50					     ;	     mov al, 20h	     ; контроллер прерываний
     51					     ;	     out 20h, al
     52
     53	0142  07 5F 58				     pop es di ax
     54
     55	0145  EA				     db	0eah
     56	0146  0000		     Old09	     dw	0
     57	0148  0000				     dw	0
Turbo Assembler	 Version 4.1	    02/18/20 18:23:43	    Page 2
main.asm



     58
     59	014A  CF				     iret		     ; interrupt return
     60	014B					     endp
     61				     ;==========================================================================
     62
     63	014B			     EndLabel:
     64				     end	     Start
Turbo Assembler	 Version 4.1	    02/18/20 18:23:43	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/18/20"
??FILENAME			  Text	 "main	  "
??TIME				  Text	 "18:23:43"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 MAIN
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ENDLABEL			  Near	 DGROUP:014B
NEW09				  Near	 DGROUP:0132
OLD09				  Word	 DGROUP:0146
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  014B Word	  Public  CODE
