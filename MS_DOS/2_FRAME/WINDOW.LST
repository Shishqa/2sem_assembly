Turbo Assembler	 Version 4.1	    02/18/20 23:18:47	    Page 1
window.asm



      1				     locals @@
      2
      3				     .186
      4
      5	0000			     .model tiny
      6	0000			     .code
      7
      8				     public DrawWindow
      9
     10				     extrn SetVideo: proc
     11				     extrn DrawHorLine:	proc
     12				     extrn DrawVerLine:	proc
     13
     14				     ;==========================================================================
     15				     ; Draws a window on the screen
     16				     ; Entry: DI - start addr
     17				     ;	      CX - width
     18				     ;	      DX - height
     19				     ; Destr: AX BX CX DX
     20				     ;==========================================================================
     21
     22	0000			     DrawWindow		     proc
     23
     24	      =003B		     CORNER_COLOR_ATTR equ 3bh
     25	      =0070		     INSIDE_COLOR_ATTR equ 70h
     26	      =0014		     SHADOW_COLOR_ATTR equ 14h
     27
     28	      =00C9		     LEFT_UP_CORNER    equ 0c9h
     29	      =00BB		     RIGHT_UP_CORNER   equ 0bbh
     30	      =00C8		     LEFT_DOWN_CORNER  equ 0c8h
     31	      =00BC		     RIGHT_DOWN_CORNER equ 0bch
     32	      =00CD		     HOR_BORDER	       equ 0cdh
     33	      =00BA		     VER_BORDER	       equ 0bah
     34	      =0020		     INSIDE	       equ ' '
     35	      =00B1		     SHADOW	       equ 0b1h
     36
     37	0000  E8 0000e					     call SetVideo
     38
     39	0003  B8 3BC9		     UPPER_BORDER:	     mov ax, (CORNER_COLOR_ATTR	shl 8) or LEFT_UP_CORNER
     40	0006  AB					     stosw
     41
     42	0007  51					     push cx
     43	0008  B0 CD					     mov al, HOR_BORDER
     44	000A  83 E9 02					     sub cx, 2
     45	000D  E8 0000e					     call DrawHorLine
     46	0010  59					     pop cx
     47
     48	0011  B0 BB					     mov al, RIGHT_UP_CORNER
     49	0013  AB					     stosw
     50
     51	0014  87 CA		     IN_WINDOW:		     xchg cx, dx
     52	0016  83 EA 02					     sub dx, 2d
     53	0019  83 E9 02					     sub cx, 2d
     54
     55	001C  81 C7 009C				     add di, 156d
     56	0020  2B FA					     sub di, dx
     57	0022  2B FA					     sub di, dx
Turbo Assembler	 Version 4.1	    02/18/20 23:18:47	    Page 2
window.asm



     58
     59	0024  8B D9		     @@Next:		     mov bx, cx
     60
     61	0026  B8 3BBA					     mov ax, (CORNER_COLOR_ATTR	shl 8) or VER_BORDER
     62	0029  AB					     stosw
     63
     64	002A  B8 7020					     mov ax, (INSIDE_COLOR_ATTR	shl 8) or INSIDE
     65	002D  8B CA					     mov cx, dx
     66	002F  E8 0000e					     call DrawHorLine
     67
     68	0032  B8 3BBA					     mov ax, (CORNER_COLOR_ATTR	shl 8) or VER_BORDER
     69	0035  AB					     stosw
     70
     71	0036  B8 14B1					     mov ax, (SHADOW_COLOR_ATTR	shl 8) or SHADOW
     72	0039  AB					     stosw
     73
     74	003A  81 C7 009A				     add di, 154d
     75	003E  2B FA					     sub di, dx
     76	0040  2B FA					     sub di, dx
     77
     78	0042  8B CB					     mov cx, bx
     79	0044  E2 DE					     loop @@Next
     80
     81	0046  B8 3BC8		     LOWER_BORDER:	     mov ax, (CORNER_COLOR_ATTR	shl 8) or LEFT_DOWN_CORNER
     82	0049  AB					     stosw
     83
     84	004A  B0 CD					     mov al, HOR_BORDER
     85	004C  8B CA					     mov cx, dx
     86	004E  E8 0000e					     call DrawHorLine
     87
     88	0051  B0 BC					     mov al, RIGHT_DOWN_CORNER
     89	0053  AB					     stosw
     90
     91	0054  B8 14B1					     mov ax, (SHADOW_COLOR_ATTR	shl 8) or SHADOW
     92	0057  AB					     stosw
     93
     94	0058  81 C7 009C				     add di, 156d
     95	005C  2B FA					     sub di, dx
     96	005E  2B FA					     sub di, dx
     97
     98	0060  83 C2 02					     add dx, 2d
     99	0063  8B CA					     mov cx, dx
    100	0065  E8 0000e					     call DrawHorLine
    101
    102	0068  C3					     ret
    103	0069						     endp
    104				     ;==========================================================================
    105
    106				     end
Turbo Assembler	 Version 4.1	    02/18/20 23:18:47	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/18/20"
??FILENAME			  Text	 "window  "
??TIME				  Text	 "23:18:47"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@NEXT				  Near	 DGROUP:0024
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 WINDOW
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
CORNER_COLOR_ATTR		  Number 003B
DRAWHORLINE			  Near	 DGROUP:---- Extern
DRAWVERLINE			  Near	 DGROUP:---- Extern
DRAWWINDOW			  Near	 DGROUP:0000
HOR_BORDER			  Number 00CD
INSIDE				  Number 0020
INSIDE_COLOR_ATTR		  Number 0070
IN_WINDOW			  Near	 DGROUP:0014
LEFT_DOWN_CORNER		  Number 00C8
LEFT_UP_CORNER			  Number 00C9
LOWER_BORDER			  Near	 DGROUP:0046
RIGHT_DOWN_CORNER		  Number 00BC
RIGHT_UP_CORNER			  Number 00BB
SETVIDEO			  Near	 DGROUP:---- Extern
SHADOW				  Number 00B1
SHADOW_COLOR_ATTR		  Number 0014
UPPER_BORDER			  Near	 DGROUP:0003
VER_BORDER			  Number 00BA

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0069 Word	  Public  CODE
