Turbo Assembler	 Version 4.1	    02/22/20 12:43:12	    Page 1
str_std.asm



      1				     locals @@
      2
      3	0000			     .model tiny
      4	0000			     .code
      5
      6				     extrn   memchr: proc
      7				     extrn   memcmp: proc
      8				     extrn   memset: proc
      9				     extrn   memcpy: proc
     10
     11				     public  strlen
     12				     public  strchr
     13				     public  strcpy
     14				     public  strcmp
     15
     16				     ;==========================================================================
     17				     ; Gets length of null-terminated string
     18				     ; Entry: ES:DI - absolute address of string
     19				     ; Exit:  CX <- length of string
     20				     ; Destr: AL DI
     21				     ;==========================================================================
     22
     23	0000			     strlen	     proc
     24
     25	0000  B0 00				     mov al, 0d
     26	0002  B9 FFFF				     mov cx, 0ffffh
     27	0005  E8 0000e				     call memchr
     28
     29	0008  8B F9				     mov di, cx
     30	000A  B9 FFFF				     mov cx, 0ffffh
     31	000D  2B CF				     sub cx, di
     32	000F  49				     dec cx
     33
     34	0010  C3				     ret
     35	0011					     endp
     36
     37				     ;==========================================================================
     38				     ; Looks within bytes of null-terminated string for	the first occurence
     39				     ; of value
     40				     ; Entry: AL - value
     41				     ;	      ES:DI - absolute address of string
     42				     ; Exit:  ES:DI <- addr next to the	first occurence	of value
     43				     ;	      ZF <- 1 if value is found
     44				     ;		    0 if value is not found
     45				     ; Destr: CX
     46				     ;==========================================================================
     47
     48	0011			     strchr	     proc
     49
     50	0011  57				     push di
     51	0012  E8 FFEB				     call strlen
     52	0015  5F				     pop di
     53
     54	0016  E8 0000e				     call memchr
     55
     56	0019  C3				     ret
     57	001A					     endp
Turbo Assembler	 Version 4.1	    02/22/20 12:43:12	    Page 2
str_std.asm



     58
     59				     ;==========================================================================
     60				     ; Compares	two null-terminated strings
     61				     ; Entry: ES:DI - absolute addr of the str1
     62				     ;	      DS:SI - absolute addr of the str2
     63				     ; Exit:  ZF <- 0 if str1 != str2
     64				     ;		    1 if str1  = str2
     65				     ;	      CF <- 0 if str1  > str2
     66				     ;		    1 if str1  < str2
     67				     ; Destr: DI SI
     68				     ;==========================================================================
     69
     70	001A			     strcmp	     proc
     71
     72	001A  57				     push di
     73	001B  E8 FFE2				     call strlen
     74	001E  5F				     pop di
     75
     76	001F  41				     inc cx
     77	0020  E8 0000e				     call memcmp
     78
     79	0023					     endp
     80
     81				     ;==========================================================================
     82				     ; Copies null-terminated string to	the destination
     83				     ; Entry: ES:DI - destination absolute address
     84				     ;	      DS:SI - source absolute address
     85				     ; Destr: CX DI SI
     86				     ;==========================================================================
     87
     88	0023			     strcpy	     proc
     89
     90	0023  57				     push di
     91	0024  E8 FFD9				     call strlen
     92	0027  5F				     pop di
     93
     94	0028  E8 0000e				     call memcpy
     95
     96	002B  C3				     ret
     97	002C					     endp
     98
     99				     ;==========================================================================
    100
    101				     end
Turbo Assembler	 Version 4.1	    02/22/20 12:43:12	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/22/20"
??FILENAME			  Text	 "str_std "
??TIME				  Text	 "12:43:12"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 STR_STD
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
MEMCHR				  Near	 DGROUP:---- Extern
MEMCMP				  Near	 DGROUP:---- Extern
MEMCPY				  Near	 DGROUP:---- Extern
MEMSET				  Near	 DGROUP:---- Extern
STRCHR				  Near	 DGROUP:0011
STRCMP				  Near	 DGROUP:001A
STRCPY				  Near	 DGROUP:0023
STRLEN				  Near	 DGROUP:0000

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  002C Word	  Public  CODE
